<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- Bootstrap CDN link  -->
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

</head>
<style>
    body{
        background-color: rgb(176, 237, 183);
    }
    .form-container{
        width: 500px;
        background-color: rgb(255, 255, 255);
        padding: 20px;
        border: 2 px solid black;
        display: flex;
        margin:150px auto;
        box-shadow: inset;
        
    }
    form label{
        font-size: 14px;
        font-weight: bold;
    }
</style>
<body>
    
   
<div class="card form-container">
     <h1 style="color: blue;text-align: center;">Registration Form</h1>
    <form class="mt-10 p-2">

   <div class="mb-3">
  <label for="exampleFormControlInput1" class="form-label">Name </label>
  <input type="text" class="form-control" id="name" placeholder="User Name">
</div>



   <div class="mb-3">
  <label for="exampleFormControlInput1" class="form-label">Email address</label>
  <input type="email" class="form-control" id="email" placeholder="name@example.com">
</div>



   <div class="mb-3">
  <label for="exampleFormControlInput1" class="form-label">Password</label>
  <input type="password" class="form-control" id="password" placeholder="password">
</div>



<div class="mb-3 ">
    <label class="form-label" for="inputGroupSelect02"> Role</label>
  <select class="form-select" id="select-role">
    <option selected>Select</option>
    <option value="user">user</option>
    <option value="leader">leader</option>
    <option value="admin">admin</option>
    <option value="superadmin">superadmin</option>
  </select>
 
</div>

<button  id="submit" class="btn btn-success" style="width: 100%;" disabled>Success</button>
</form>
</div>




<script src=""></script>
  <script type="module" >
  import {auth,db,storage } from '/Js/storage.js';
  import { doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";
  import { createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";


  document.getElementById('submit').addEventListener("click",function submitForm(e){
    e.preventDefault();
    console.log("button clicke")

    const name=document.getElementById('name').value;
    const email=document.getElementById('email').value;
    const password=document.getElementById('password').value;
    const role=document.getElementById('select-role').value;

 async function registerUser({name, email, password, role}) {
  try {
    
    const userCreate = await createUserWithEmailAndPassword(auth, email, password);
    const uid = userCreate.user.uid;
    await setDoc(doc(db, "users", uid), {
      name,
      email,
      role,
      createdAt: serverTimestamp()
    });
    return { success: true, uid };
  } catch (error) {
    console.error("Registration error:", error);
     document.querySelector('form').reset();
    return { success: false, error };
  }

}
registerUser({ name, email, password, role })
  .then(result => {
      if(result.success){
          alert("Registration successful!");
          document.querySelector('form').reset();
      } else {
          alert("Error: " + result.error.message);
      }
  });

  });

 
</script>


</body>
</html>